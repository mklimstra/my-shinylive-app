[{"name": "app.py", "content": "from pathlib import Path\n\nimport pandas as pd\nfrom palmerpenguins import load_penguins\nfrom plots import dist_plot, scatter_plot\nfrom shiny import reactive, render, ui\nfrom shiny.express import input, ui\n\ndf = load_penguins()\n\nwith ui.sidebar():\n    ui.input_slider(\"mass\", \"Mass\", 2000, 8000, 6000)\n    ui.input_checkbox(\"smoother\", \"Add Smoother\")\n\n\n@reactive.calc\ndef filtered_data():\n    filt_df = df.copy()\n    filt_df = filt_df.loc[df[\"body_mass_g\"] < input.mass()]\n    return filt_df\n\n\nwith ui.card():\n\n    @render.plot\n    def scatter():\n        return scatter_plot(filtered_data(), input.smoother())\n\n\nwith ui.card():\n\n    @render.plot\n    def mass_distribution():\n        return dist_plot(filtered_data())\n", "type": "text"}, {"name": "plots.py", "content": "from plotnine import aes, geom_density, geom_point, ggplot, stat_smooth, theme_light\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass_g\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length_mm\",\n                y=\"bill_depth_mm\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n", "type": "text"}]