[{"name": "app.py", "content": "from shiny.express import input, output, render, ui\nfrom shinywidgets import render_plotly\nimport plotly.express as px\nfrom palmerpenguins import load_penguins\n\n# Hardcoded credentials\nVALID_USERNAME = \"user\"\nVALID_PASSWORD = \"password\"\n\n# Simple global variable to track login status\nlogin_status = False\n\n# Define the login page UI\ndef login_page():\n    return ui.page_fluid(\n        ui.h2(\"Login Page\"),\n        ui.input_text(\"username\", \"Username\", \"\"),\n        ui.input_password(\"password\", \"Password\", \"\"),\n        ui.input_action_button(\"login_btn\", \"Login\"),\n        ui.output_text(\"login_message\")\n    )\n\n# Define the main app UI (Penguins dashboard)\ndef main_page():\n    return ui.page_fluid(\n        ui.layout_sidebar(\n            ui.panel_sidebar(\n                ui.input_selectize(\n                    \"var\", \"Select variable\",\n                    [\"bill_length_mm\", \"bill_depth_mm\", \"flipper_length_mm\", \"body_mass_g\", \"year\"]\n                ),\n                ui.input_numeric(\"bins\", \"Number of bins\", 30)\n            ),\n            ui.panel_main(\n                ui.output_plot(\"hist_plot\")\n            )\n        )\n    )\n\n# Dynamically render either the login page or the main dashboard based on login status\ndef app_ui():\n    if login_status:\n        return main_page()\n    else:\n        return login_page()\n\n# Define the server-side logic\ndef server(input, output, session):\n    global login_status  # Access global login status variable\n\n    # Render the login message\n    @output\n    @render.text\n    def login_message():\n        return \"\"\n\n    # Define what happens when the login button is clicked\n    @input.login_btn\n    def check_login():\n        global login_status\n        username = input.username()  # Get the entered username\n        password = input.password()  # Get the entered password\n\n        # Check if the entered credentials match the valid ones\n        if username == VALID_USERNAME and password == VALID_PASSWORD:\n            login_status = True  # Set login status to True upon successful login\n            session.reload()  # Reload the session to reflect the updated login status\n        else:\n            output.login_message.set(\"Invalid username or password.\")  # Show error message\n\n    # If the user is logged in, display the histogram plot\n    if login_status:\n        @output\n        @render_plotly\n        def hist_plot():\n            df = load_penguins()\n            return px.histogram(df, x=input.var(), nbins=input.bins())\n\n# ShinyLive runs the app without explicit App instantiation\n", "type": "text"}]